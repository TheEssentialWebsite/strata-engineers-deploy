
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Hostinger-specific: Force index.html as primary directory index
    DirectoryIndex index.html index.htm index.php
    
    # Cache busting for deployment verification
    RewriteRule ^deploy-info\.json$ /deploy-info.json [L]
    RewriteRule ^diagnostic\.html$ /diagnostic.html [L]

    # Serve PNG favicon for /favicon.ico
    RewriteRule ^favicon\.ico$ /sce-logo-2024.png [L]
    
    # Handle React Router - HTML5 history mode
    # Don't rewrite files or directories
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]
    
    # Don't rewrite asset files or diagnostic files
    RewriteCond %{REQUEST_URI} !\.(js|css|png|jpg|jpeg|gif|svg|ico|woff|woff2|ttf|eot|map|json)$
    RewriteCond %{REQUEST_URI} !^/diagnostic\.html$
    
    # Rewrite everything else to index.html to allow HTML5 state links
    RewriteRule ^ index.html [L]
</IfModule>

# Enhanced caching for mobile performance
<IfModule mod_expires.c>
    ExpiresActive on
    
    # Static assets - 1 year cache
    ExpiresByType text/css "access plus 1 year"
    ExpiresByType application/javascript "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType image/jpg "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/svg+xml "access plus 1 year"
    ExpiresByType image/webp "access plus 1 year"
    
    # Font files - 1 year cache
    ExpiresByType font/woff "access plus 1 year"
    ExpiresByType font/woff2 "access plus 1 year"
    ExpiresByType application/font-woff "access plus 1 year"
    ExpiresByType application/font-woff2 "access plus 1 year"
    
    # HTML files - shorter cache for updates
    ExpiresByType text/html "access plus 1 hour"
</IfModule>

# Add Cache-Control headers for better browser compatibility
<IfModule mod_headers.c>
    # Static assets - public cache with max-age
    <FilesMatch "\.(css|js|png|jpg|jpeg|gif|svg|webp|woff|woff2|ttf|eot)$">
        Header set Cache-Control "public, max-age=31536000, immutable"
        FileETag None
    </FilesMatch>
    
    # HTML files - shorter cache
    <FilesMatch "\.(html|htm)$">
        Header set Cache-Control "public, max-age=3600"
    </FilesMatch>
</IfModule>
